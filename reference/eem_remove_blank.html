<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Blank correction — eem_remove_blank • eemR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Blank correction — eem_remove_blank"><meta name="description" content="This function is used to remove blank from eems which can help
  to reduce the effect of scatter bands."><meta property="og:description" content="This function is used to remove blank from eems which can help
  to reduce the effect of scatter bands."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eemR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/custom-import-function.html">Creating custom import functions</a></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to eemR</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PMassicotte/eemR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Blank correction</h1>
      <small class="dont-index">Source: <a href="https://github.com/PMassicotte/eemR/blob/main/R/eem_remove_blank.R" class="external-link"><code>R/eem_remove_blank.R</code></a></small>
      <div class="d-none name"><code>eem_remove_blank.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is used to remove blank from eems which can help
  to reduce the effect of scatter bands.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">eem_remove_blank</span><span class="op">(</span><span class="va">eem</span>, blank <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-eem">eem<a class="anchor" aria-label="anchor" href="#arg-eem"></a></dt>
<dd><p>An object of class <code>eemlist</code>.</p></dd>


<dt id="arg-blank">blank<a class="anchor" aria-label="anchor" href="#arg-blank"></a></dt>
<dd><p>An object of class <code>eemlist</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>eemlist</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function will first try to use the provided <code>blank</code>. If the
  blank is omitted, the function will then try to extract the blank from the
  <code>eemlist</code> object. This is done by looking for sample names containing
  one of these complete or partial strings (ignoring case):</p>
<p></p><ol><li><p>nano</p></li>
<li><p>miliq</p></li>
<li><p>milliq</p></li>
<li><p>mq</p></li>
<li><p>blank</p></li>
</ol><p>Note that if <code>blank</code> is omitted, the function will group the
  <code>eemlist</code> based on file location and will assumes that there is a
  blank sample in each folder. In that context, the blank will be used on
  each sample in the same folder. If more than one blank is found they will
  be averaged (a message will be printed if this appends).</p>
<p>Consider the following example where there are two folders that could
  represent scans performed on two different days `scans_day_1` and
  `scans_day_2`.</p>
<p></p><table class="table table"><tr><td>scans_day_1</td><td></td></tr><tr><td></td><td>nano.csv</td></tr><tr><td></td><td>sample1.csv</td></tr><tr><td></td><td>sample2.csv</td></tr><tr><td></td><td>sample3.csv</td></tr><tr><td>scans_day_2</td><td></td></tr><tr><td></td><td>blank.csv</td></tr><tr><td></td><td>s1.csv</td></tr><tr><td></td><td>s2.csv</td></tr><tr><td></td><td>s3.csv</td></tr></table><p>In each folder there are three samples and one blank files. In that
  context, `eem_remove_blank()` will use the blank `nano.csv` from
  `sample1.csv`, `sample2.csv` and `sample3.csv`. The same strategy will be
  used for files in folder `scans_day_2` but with blank named `blank.csv`.</p>
<p>Note that the blanks eem are not returned by the function.</p>
<p>Note that blank correction should be performed before Raman
  normalization (<code><a href="eem_raman_normalisation.html">eem_raman_normalisation()</a></code>). An error will occur
  if trying to perform blank correction after Raman normalization.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Murphy, K. R., Stedmon, C. a., Graeber, D., &amp; Bro, R. (2013).
  Fluorescence spectroscopy and multi-way techniques. PARAFAC. Analytical
  Methods, 5(23), 6557. https://pubs.rsc.org/en/content/articlelanding/2013/ay/c3ay41160e</p>
<p><a href="https://pubs.rsc.org/en/content/articlelanding/2013/ay/c3ay41160e" class="external-link">https://pubs.rsc.org/en/content/articlelanding/2013/ay/c3ay41160e</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example 1</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Open the fluorescence eem</span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/cary/scans_day_1"</span>, <span class="st">"sample1.csv"</span>, package <span class="op">=</span> <span class="st">"eemR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eem</span> <span class="op">&lt;-</span> <span class="fu"><a href="eem_read.html">eem_read</a></span><span class="op">(</span><span class="va">file</span>, import_function <span class="op">=</span> <span class="st">"cary"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">eem</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eem_remove_blank-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Open the blank eem</span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/cary/scans_day_1"</span>, <span class="st">"nano.csv"</span>, package <span class="op">=</span> <span class="st">"eemR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">blank</span> <span class="op">&lt;-</span> <span class="fu"><a href="eem_read.html">eem_read</a></span><span class="op">(</span><span class="va">file</span>, import_function <span class="op">=</span> <span class="st">"cary"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">blank</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eem_remove_blank-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove the blank</span></span></span>
<span class="r-in"><span><span class="va">eem</span> <span class="op">&lt;-</span> <span class="fu">eem_remove_blank</span><span class="op">(</span><span class="va">eem</span>, <span class="va">blank</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">eem</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eem_remove_blank-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example 2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Open the fluorescence eem</span></span></span>
<span class="r-in"><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/cary/scans_day_1"</span>, package <span class="op">=</span> <span class="st">"eemR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">eems</span> <span class="op">&lt;-</span> <span class="fu"><a href="eem_read.html">eem_read</a></span><span class="op">(</span><span class="va">folder</span>, import_function <span class="op">=</span> <span class="st">"cary"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">eems</span>, which <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eem_remove_blank-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Open the blank eem</span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/cary/scans_day_1"</span>, <span class="st">"nano.csv"</span>, package <span class="op">=</span> <span class="st">"eemR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">blank</span> <span class="op">&lt;-</span> <span class="fu"><a href="eem_read.html">eem_read</a></span><span class="op">(</span><span class="va">file</span>, import_function <span class="op">=</span> <span class="st">"cary"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">blank</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eem_remove_blank-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove the blank</span></span></span>
<span class="r-in"><span><span class="va">eems</span> <span class="op">&lt;-</span> <span class="fu">eem_remove_blank</span><span class="op">(</span><span class="va">eems</span>, <span class="va">blank</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">eems</span>, which <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="eem_remove_blank-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Automatic correction</span></span></span>
<span class="r-in"><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/cary/"</span>, package <span class="op">=</span> <span class="st">"eemR"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Look at the folder structure</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">folder</span>, <span class="st">"*.csv"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "scans_day_1/nano.csv"    "scans_day_1/sample1.csv"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "scans_day_1/sample2.csv" "scans_day_1/sample3.csv"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "scans_day_2/blank.csv"   "scans_day_2/s1.csv"     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">eems</span> <span class="op">&lt;-</span> <span class="fu"><a href="eem_read.html">eem_read</a></span><span class="op">(</span><span class="va">folder</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span>, import_function <span class="op">=</span> <span class="st">"cary"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">eem_remove_blank</span><span class="op">(</span><span class="va">eems</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> A total of 1 blank EEMs will be averaged.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> A total of 1 blank EEMs will be averaged.</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Philippe Massicotte.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

